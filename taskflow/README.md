# TaskFlow - Руководство по развертыванию (Docker)
## ДЛЯ ПОЛЬЗОВАТЕЛЕЙ WINDOWS - приложение может работать очень медленно, за счет плохо настронного WLS 2, У пользователей Unix систем проблем быть не должно
## Суть проекта показать умение работать с сессией и в целом понимание бэкэнда, фронтенд весь сделан без особых умений.
## Требования
Перед началом убедитесь, что у вас установлено:
- Docker (версия 20.10.0 или выше)
- Docker Compose (версия 1.29.0 или выше)

## Начало работы

### 1. Клонирование репозитория
Склонируйте репозиторий TaskFlow на ваш компьютер.

### 2. Подготовка окружения
Убедитесь, что у вас следующая структура папок:
```
taskflow/
├── api/          # Код вашего PHP/Symfony приложения
├── docker/
│   ├── nginx/    # Конфигурация Nginx
│   └── php/      # Dockerfile для PHP
└── docker-compose.yml
```

### 3. Конфигурация
Система предварительно настроена с:
- PHP сервис (кастомный образ из ./docker/php)
- Nginx веб-сервер
- PostgreSQL база данных
- Redis кэш

Данные по умолчанию:
- База данных:
  - Пользователь: `symfony`
  - Пароль: `secret`
  - Имя БД: `taskflow`
- Redis: Без аутентификации по умолчанию

### 4. Запуск приложения
Для запуска всех сервисов выполните команду из корневой директории (где находится docker-compose.yml):

```bash
docker-compose up -d
```

Это выполнит:
1. Сборку PHP контейнера
2. Загрузку необходимых образов (Nginx, PostgreSQL, Redis)
3. Запуск всех сервисов в фоновом режиме

### 5. Доступ к приложению
- Веб-приложение: http://localhost:8080
- PostgreSQL: localhost:5432
- Redis: localhost:6379

### 6. Остановка приложения
Для остановки всех сервисов:

```bash
docker-compose down
```

## Настройка

### Изменение портов
Для использования других портов измените секцию `ports` в docker-compose.yml:
```yaml
ports:
  - "НОВЫЙ_ПОРТ:ПОРТ_В_КОНТЕЙНЕРЕ"
```

### Изменение путей к volumes
Текущая конфигурация использует:
- `D:/taskflow/api` маппится в `/var/www/html` в PHP и Nginx контейнерах
- Обновите эти пути в секции `volumes` в соответствии с вашим окружением

### Переменные окружения
Данные для доступа к БД можно изменить в секции `environment` сервиса `db`.

## Решение проблем

### Просмотр логов
Для просмотра логов конкретного сервиса:
```bash
docker-compose logs ИМЯ_СЕРВИСА
# Пример:
docker-compose logs php
```

### Пересборка контейнеров
Если вы внесли изменения в Dockerfiles или нужно пересобрать:
```bash
docker-compose up -d --build
```

### Проверка запущенных контейнеров
```bash
docker-compose ps
```